<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Smart Petanque Judge</title>
  <!-- ‡πÉ‡∏ä‡πâ path ‡πÅ‡∏ö‡∏ö relative -->
  <link rel="stylesheet" href="static/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- PWA manifest -->
  <link rel="manifest" href="static/manifest.json">
  <meta name="theme-color" content="#00b4d8">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
  <header>
    <h1>üéØ Smart Petanque Judge</h1>
    <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏•‡∏π‡∏Å‡πÄ‡∏õ‡∏ï‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</p>
    <button id="dashboardBtn" class="btn">üìä ‡∏î‡∏π‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</button>
  </header>

  <main>
    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ï‡∏ä‡πå (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
    <section style="max-width: 960px; margin: 2rem auto; padding: 1.5rem 2rem; background: #e0f9f9; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,127,127,0.25);">
      <label for="matchNameInput" style="font-weight: 600; color: #007f7f; font-size: 1.2rem;">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ï‡∏ä‡πå:</label>
      <input type="text" id="matchNameInput" name="match_name" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ï‡∏ä‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" style="padding: 0.6rem 1.2rem; width: 320px; border-radius: 8px; border: 2px solid #00b4d8; margin-left: 1rem; font-size: 1rem;" />
      <button id="saveMatchBtn" style="margin-left: 1rem; padding: 0.6rem 1.2rem; font-size: 1rem; border-radius: 8px; background-color: #00b4d8; color: white; border: none; cursor: pointer;">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏°‡∏ï‡∏ä‡πå</button>
    </section>

    <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏Ç‡πà‡∏á (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
    <section class="competition-type-section" style="max-width: 960px; margin: 1rem auto 2rem auto; padding: 1rem 1.5rem 0.7rem 1.5rem; background: #fefefe; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,127,127,0.1); overflow: hidden;">
      <h2 style="margin: 0 0 0.3rem 0; font-weight: 700;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</h2>
      <select id="competitionType" name="competition_type" class="competition-select" style="padding: 0.45rem 1rem; font-size: 1rem; border-radius: 8px; border: 2px solid #00b4d8; max-width: 320px; display: block; margin-top: 0;">
        <option value="singles">‡∏Ñ‡∏π‡πà‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (Singles)</option>
        <option value="doubles">‡∏Ñ‡∏π‡πà‡∏ó‡∏µ‡∏° (Doubles)</option>
        <option value="team">‡∏ó‡∏µ‡∏° (Team)</option>
      </select>
    </section>

    <!-- ====== ‡∏†‡∏≤‡∏û‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡∏Å‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠) ====== -->
    <section class="video-section" style="max-width: 960px; margin: 2rem auto;">
      <h2>‡∏†‡∏≤‡∏û‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á</h2>

      <div class="video-controls">
        <button id="startCamBtn" class="btn">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        <button id="toggleCamBtn" class="btn btn-secondary" type="button">üîÅ ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        <select id="cameraSelect" class="select"></select>
        <button id="torchBtn" class="btn btn-secondary" type="button">üí° ‡πÑ‡∏ü‡∏â‡∏≤‡∏¢</button>
      </div>

      <div class="video-wrapper">
        <video id="liveVideo" autoplay playsinline muted></video>
      </div>

      <div class="video-actions">
        <button id="saveLiveBtn" class="btn primary">
          üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏û‡∏™‡∏î
        </button>
      </div>
    </section>
    <!-- ================================================ -->

    <!-- ‡πÅ‡∏Ñ‡∏ô‡∏ß‡∏≤‡∏™‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
    <section class="canvas-section" style="max-width: 960px; margin: 2rem auto;">
      <h2>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h2>
      <canvas id="canvas" style="width: 100%; border-radius: 8px; border: 1px solid #00b4d8;"></canvas>
    </section>

    <!-- ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
    <section class="upload-section" style="max-width: 960px; margin: 2rem auto; padding: 1.5rem 2rem; background: #f0f4f8; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,127,127,0.15);">
      <h2>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h2>
      <form id="uploadForm">
        <input type="file" id="imageInput" name="image" accept="image/*" required />
        <button id="uploadBtn" class="btn" type="submit" style="margin-left: 1rem;">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</button>
        <button id="resetBtn" class="btn btn-secondary" type="button" style="margin-left: 1rem;">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        <div id="filePreview" class="file-preview" style="margin-top: 1rem;"></div>
      </form>
    </section>

    <!-- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
    <section class="score-section" style="max-width: 960px; margin: 2rem auto;">
      <h2>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h2>
      <div class="score-box" style="display: flex; gap: 2rem; flex-wrap: wrap;">
        <div class="team team-a" style="flex: 1; min-width:260px; background: #d9f6e6; padding: 1rem; border-radius: 10px;">
          <h3>‡∏ó‡∏µ‡∏° A (‡∏•‡∏π‡∏Å‡πÄ‡∏õ‡∏ï‡∏≠‡∏á‡∏•‡∏≤‡∏¢) ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</h3>
          <div class="score-value" id="teamAScore" style="font-size: 2.5rem; font-weight: 700;">0</div>
          <div class="progress-bar" style="background: #bde5d1; border-radius: 10px; overflow: hidden; height: 20px;">
            <div id="progressA" class="progress-fill" style="background: #3ac66b; height: 100%; width: 0;"></div>
          </div>
        </div>
        <div class="team team-b" style="flex: 1; min-width:260px; background: #d9e7f6; padding: 1rem; border-radius: 10px;">
          <h3>‡∏ó‡∏µ‡∏° B (‡∏•‡∏π‡∏Å‡πÄ‡∏õ‡∏ï‡∏≠‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤) ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô</h3>
          <div class="score-value" id="teamBScore" style="font-size: 2.5rem; font-weight: 700;">0</div>
          <div class="progress-bar" style="background: #b7c9e8; border-radius: 10px; overflow: hidden; height: 20px;">
            <div id="progressB" class="progress-fill" style="background: #396fbc; height: 100%; width: 0;"></div>
          </div>
        </div>
      </div>
      <div id="scoreDisplay" class="score-display" style="margin-top: 1rem; font-size: 1.4rem; font-weight: 600; color: #007f7f;"></div>
    </section>

    <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
    <section class="status-section" style="max-width: 960px; margin: 2rem auto;">
      <div id="status" class="status-message" style="font-size: 1.1rem; color: #007f7f;"></div>
    </section>
  </main>

  <footer>
    <p>2025 by ‡∏Ñ‡∏¥‡∏°,‡∏Å‡∏≤‡∏¢ | ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Smart Petanque Judge</p>
  </footer>

  <!-- JS ‡πÅ‡∏ö‡∏ö relative path (‡πÉ‡∏™‡πà ?v=6 ‡∏Å‡∏±‡∏ô‡πÅ‡∏Ñ‡∏ä‡πÑ‡∏î‡πâ) -->
  <script src="static/app.js?v=6"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const dashboardBtn = document.getElementById("dashboardBtn");
      if (dashboardBtn) {
        dashboardBtn.addEventListener("click", function () {
          window.location.href = "dashboard.html"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô /dashboard ‡πÄ‡∏õ‡πá‡∏ô dashboard.html ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö static
        });
      }

      // --- Register Service Worker for PWA (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) ---
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("static/sw.js")
          .then((reg) => console.log("Service Worker registered.", reg))
          .catch((err) => console.log("Service Worker registration failed:", err));
      }
    });
  </script>
</body>
</html>
