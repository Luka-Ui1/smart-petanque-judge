<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Smart Petanque Judge</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="static/style.css" />

  <!-- PWA -->
  <link rel="manifest" href="static/manifest.json">
  <meta name="theme-color" content="#00b4d8">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body style="font-family: 'Kanit', sans-serif; background-color: #f8f9fa;">

  <!-- Header -->
  <header class="text-center bg-primary text-white py-4 shadow-sm">
    <h1 class="fw-bold mb-1" style="font-size: clamp(1.5rem, 4vw, 2.5rem);">üéØ Smart Petanque Judge</h1>
    <p class="mb-3">‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏•‡∏π‡∏Å‡πÄ‡∏õ‡∏ï‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</p>
    <button id="dashboardBtn" class="btn btn-light fw-bold">üìä ‡∏î‡∏π‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</button>
  </header>

  <main class="container my-4">

    <!-- ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ï‡∏ä‡πå -->
    <section class="p-3 p-md-4 bg-info bg-opacity-10 rounded shadow-sm mb-4">
      <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center gap-3">
        <label for="matchNameInput" class="fw-semibold text-primary" style="font-size: 1.2rem;">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ï‡∏ä‡πå:</label>
        <input type="text" id="matchNameInput" name="match_name" class="form-control" style="max-width: 320px;" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ï‡∏ä‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" />
        <button id="saveMatchBtn" class="btn btn-primary fw-bold">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏°‡∏ï‡∏ä‡πå</button>
      </div>
    </section>

    <!-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô -->
    <section class="p-3 bg-white rounded shadow-sm mb-4">
      <h2 class="fw-bold mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</h2>
      <select id="competitionType" name="competition_type" class="form-select" style="max-width: 320px;">
        <option value="singles">‡∏Ñ‡∏π‡πà‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (Singles)</option>
        <option value="doubles">‡∏Ñ‡∏π‡πà‡∏ó‡∏µ‡∏° (Doubles)</option>
        <option value="team">‡∏ó‡∏µ‡∏° (Team)</option>
      </select>
    </section>

    <!-- ‡∏†‡∏≤‡∏û‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á -->
    <section class="mb-4">
      <h2 class="fw-bold mb-3">‡∏†‡∏≤‡∏û‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á</h2>
      <div class="d-flex flex-wrap gap-2 mb-3">
        <button id="startCamBtn" class="btn btn-success">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        <button id="toggleCamBtn" class="btn btn-secondary" type="button">üîÅ ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        <select id="cameraSelect" class="form-select" style="width: auto;"></select>
        <button id="torchBtn" class="btn btn-secondary" type="button">üí° ‡πÑ‡∏ü‡∏â‡∏≤‡∏¢</button>
      </div>
      <div class="ratio ratio-4x3 mb-3" style="background:#000; border-radius: 10px; overflow:hidden;">
        <video id="liveVideo" autoplay playsinline muted style="width: 100%; height: 100%; object-fit: cover;"></video>
      </div>
      <div>
        <button id="saveLiveBtn" class="btn btn-primary w-100 fw-bold">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏û‡∏™‡∏î</button>
      </div>
    </section>

    <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö -->
    <section class="mb-4">
      <h2 class="fw-bold mb-2">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h2>
      <canvas id="canvas" class="border border-primary rounded w-100" style="max-height: 400px;"></canvas>
    </section>

    <!-- ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û -->
    <section class="p-3 bg-light rounded shadow-sm mb-4">
      <h2 class="fw-bold mb-3">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h2>
      <form id="uploadForm" class="d-flex flex-wrap gap-2">
        <input type="file" id="imageInput" name="image" class="form-control" accept="image/*" required />
        <button id="uploadBtn" class="btn btn-primary" type="submit">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</button>
        <button id="resetBtn" class="btn btn-secondary" type="button">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
      </form>
      <div id="filePreview" class="mt-3"></div>
    </section>

    <!-- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô -->
    <section class="mb-4">
      <h2 class="fw-bold mb-3">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h2>
      <div class="row g-3">
        <div class="col-md-6">
          <div class="p-3 bg-success bg-opacity-10 rounded">
            <h3 class="mb-2">‡∏ó‡∏µ‡∏° A (‡∏•‡∏π‡∏Å‡πÄ‡∏õ‡∏ï‡∏≠‡∏á‡∏•‡∏≤‡∏¢) ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</h3>
            <div id="teamAScore" class="fs-1 fw-bold">0</div>
            <div class="progress" style="height: 20px;">
              <div id="progressA" class="progress-bar bg-success" style="width: 0%;"></div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="p-3 bg-primary bg-opacity-10 rounded">
            <h3 class="mb-2">‡∏ó‡∏µ‡∏° B (‡∏•‡∏π‡∏Å‡πÄ‡∏õ‡∏ï‡∏≠‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤) ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô</h3>
            <div id="teamBScore" class="fs-1 fw-bold">0</div>
            <div class="progress" style="height: 20px;">
              <div id="progressB" class="progress-bar bg-primary" style="width: 0%;"></div>
            </div>
          </div>
        </div>
      </div>
      <div id="scoreDisplay" class="mt-3 fs-5 fw-semibold text-primary"></div>
    </section>

    <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
    <section class="mb-4">
      <div id="status" class="fs-6 text-primary"></div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="text-center py-3 bg-dark text-white mt-4">
    <p class="mb-0">2025 by ‡∏Ñ‡∏¥‡∏°,‡∏Å‡∏≤‡∏¢ | ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Smart Petanque Judge</p>
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="static/app.js?v=6"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const dashboardBtn = document.getElementById("dashboardBtn");
      if (dashboardBtn) {
        dashboardBtn.addEventListener("click", function () {
          window.location.href = "dashboard.html";
        });
      }
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("static/sw.js")
          .then((reg) => console.log("Service Worker registered.", reg))
          .catch((err) => console.log("Service Worker registration failed:", err));
      }
    });
  </script>
</body>
</html>
